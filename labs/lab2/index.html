<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Lab 2: Software Design  &middot; CS 220</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="">


<meta property="og:title" content="Lab 2: Software Design  &middot; CS 220 ">
<meta property="og:site_name" content="CS 220"/>
<meta property="og:url" content="https://uchicago-cs.github.io/cmsc22000/labs/lab2/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2018-01-28T00:00:00Z" />
<meta property="og:article:modified_time" content="2018-01-28T00:00:00Z" />

  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@" />
<meta name="twitter:title" content="Lab 2: Software Design" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="https://uchicago-cs.github.io/cmsc22000/labs/lab2/" />
<meta name="twitter:domain" content="https://uchicago-cs.github.io/cmsc22000/">
  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Lab 2: Software Design",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2018-01-28",
    "description": "",
    "wordCount":  1096 
  }
</script>



<link rel="canonical" href="https://uchicago-cs.github.io/cmsc22000/labs/lab2/" />

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://uchicago-cs.github.io/touch-icon-144-precomposed.png">
<link href="https://uchicago-cs.github.io/favicon.png" rel="icon">

<meta name="generator" content="Hugo 0.55.6" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link href='https://fonts.googleapis.com/css?family=Merriweather:300%7CRaleway%7COpen+Sans' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/cmsc22000/css/font-awesome.min.css">
<link rel="stylesheet" href="/cmsc22000/css/style.css">


  <link rel="stylesheet" href="https://uchicago-cs.github.io/cmsc22000/css/custom.css">
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>


  
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-27880910-4', 'auto');
	  ga('send', 'pageview');

	</script>

</head>
<body>
  <main id="main-wrapper" class="container main_wrapper has-sidebar">
    <header id="main-header" class="container main_header">
  <div class="container brand">
  <div class="container title h1-like">
  <a class="baselink" href="https://uchicago-cs.github.io/cmsc22000/">
  CS 220

</a>

</div>

  
<div class="container topline">
  
  Introduction to Software Development


</div>


</div>

  <nav class="container nav primary no-print">
  


  
<a href="https://uchicago-cs.github.io/cmsc22000/syllabus/">Syllabus</a>

<a href="https://uchicago-cs.github.io/cmsc22000/calendar/">Course Calendar</a>

<a href="https://uchicago-cs.github.io/cmsc22000/projects/2019/spec/">Project</a>

<a href="https://uchicago-cs.github.io/cmsc22000/labs/">Labs</a>

<a href="https://uchicago-cs.github.io/cmsc22000/resources/">Additional Resources</a>

<a href="https://uchicago-cs.github.io/cmsc22000/faq/">FAQs</a>


</nav>

<div class="container nav secondary no-print">
  





 


















</div>


  

</header>


<article id="main-content" class="container main_content single">
  <header class="container hat">
  <h1>Lab 2: Software Design
</h1>

</header>

  <div class="container content">
  

<p><strong>Due:</strong> Thursday, April 18th, 2:30pm</p>

<p>In this lab, you will carry out some basic software design tasks individually, and will also start working with your project team on a design warmup exercise. The individual portion of this lab will be shorter than in other labs, because we expect you to spend part of your time working on the design warmup exercise. In fact, we encourage you to spend most of the lab session working on the team exercise.</p>

<p>Before we get to the individual tasks, we need you to perform an additional (ungraded but necessary) Git-related task so you can fetch the files necessary for this lab.</p>

<h2 id="task-0-pulling-from-upstream">Task 0: Pulling from upstream</h2>

<p>In the previous lab, you set up your local repo, which is set up by default to pull/push from/to a repository in our GitLab server. The repository on your machine is called a <em>local repository</em> while the one on the GitLab server is a <em>remote repository</em>. You can actually see the remote repositories associated with your local repository by running this:</p>

<pre><code>git remote -v
</code></pre>

<p>This should show something like this:</p>

<pre><code>origin  https://mit.cs.uchicago.edu/cmsc22000-spr-19/username.git (fetch)
origin  https://mit.cs.uchicago.edu/cmsc22000-spr-19/username.git (push)
</code></pre>

<p>This actually means you have one remote repository called origin (with the same URL for pulling/fetching and pushing)</p>

<p>In Git, you can actually associate your local repository with multiple remote repositories. This may seem odd, but it is very useful! In particular, we have a repository on the GitLab server where we store the files we want to distribute to you for the labs: <a href="https://mit.cs.uchicago.edu/cmsc22000-spr-19/cmsc22000-spr-19">https://mit.cs.uchicago.edu/cmsc22000-spr-19/cmsc22000-spr-19</a></p>

<p>If you visit that page, you’ll see it contains a <code>libgeometry</code> folder. These are the files we want you to use in the lab. However, instead of cloning our repository somewhere else and copying those files into your repository, you can simply add this repository as an additional remote repository:</p>

<pre><code>git remote add upstream https://mit.cs.uchicago.edu/cmsc22000-spr-19/cmsc22000-spr-19.git
</code></pre>

<p>We’ve called this additional remote repository “upstream”. You can verify it was added by running <code>git remote -v</code>, which should show the following:</p>

<pre><code>origin  https://mit.cs.uchicago.edu/cmsc22000-spr-19/username.git (fetch)
origin  https://mit.cs.uchicago.edu/cmsc22000-spr-19/username.git (push)
upstream    https://mit.cs.uchicago.edu/cmsc22000-spr-19/cmsc22000-spr-19.git (fetch)
upstream    https://mit.cs.uchicago.edu/cmsc22000-spr-19/cmsc22000-spr-19.git (push)
</code></pre>

<p>Now, to incorporate the files from the upstream repository into our repository, we just need to run the following:</p>

<pre><code>git pull upstream master
</code></pre>

<p>This command is just like the <code>git pull</code> you’ve run previously, except we’re saying “pull from the <code>upstream</code> repository’s master branch”. Once you run this command, your default editor will open up and will ask you to edit a commit, and will include the following text by default:</p>

<pre><code>Merge branch 'master' of https://mit.cs.uchicago.edu/cmsc22000-spr-19/cmsc22000-spr-19

# Please enter a commit message to explain why this merge is necessary,
# especially if it merges an updated upstream into a topic branch.
#
# Lines starting with '#' will be ignored, and an empty message aborts
# the commit.
</code></pre>

<p>Just save the commit without making any modifications, and exit the editor. Your repository will now have a <code>libgeometry</code> directory! This is a copy of the files in the upstream repository, and the changes you make will be saved to your repository, not to the upstream repository (in theory, it would be possible for you to push changes to the upstream repository, but you don’t actually have sufficient privileges to push to that repository)</p>

<p>Before you continue with the lab, make sure to push your changes to your repository on GitLab:</p>

<pre><code>git push
</code></pre>

<h2 id="refactoring-libgeometry">Refactoring libgeometry</h2>

<p>When we discussed the libgeometry library in class, we pointed out (ha!) that the Point module provides the following function:</p>

<pre><code>bool segment_intersect(point_t *p1, point_t *q1, point_t *p2, point_t *q2)
</code></pre>

<p>While this function operates on points, what it really does is operate on line segments (i.e., a finite-length line in two-dimensional space, delimited by two points). That said, placing the <code>segment_intersect</code> function inside <code>point.c</code> / <code>point.h</code> is arguably a valid design choice: if segment intersection is the only operation for which we have to work with segments, it would be potentially wasteful to spend the time to define a Segment module just to compute segment intersections.</p>

<p>However, as we continue to develop libgeometry, we realize that we need to perform segment operations in a variety of other places. So, it now makes sense to refactor our code to add a Segment module.</p>

<p>In this task, you must do the following:</p>

<ul>
<li><strong>Task 1</strong> (30 points) Add <code>segment.c</code> / <code>segment.h</code> files with the implementation and interface of a new Segment data type. Make sure to include new/init/free functions (like the ones for Point and Polygon). You will also need to update the Makefile to make sure this new file is compiled and included in the libgeometry library. Just update the <code>SRCS</code> variable in the Makefile to include your new <code>segment.c</code> file.</li>
<li><strong>Task 2</strong> (20 points) Take <code>segment_intersect</code> (and associated helper functions) out of <code>point.c</code> / <code>point.h</code> and make them a part of the Segment module. Take into account that this will involve changing the parameters of the function, since it now has to operate on Segments, not on Points.</li>
<li><strong>Task 3</strong> (20 points) Update the Polygon implementation so it uses this updated <code>segment_intersect</code> function. At this point, you should be able to build the entire library by running <code>make</code></li>

<li><p><strong>Task 4</strong> (30 points) Uh oh, the libgeometry library may build correctly, but not the tests! (try this by running <code>make tests</code>) This is because they still depend on the old version of the <code>segment_intersect</code> function. This is an example of how things can break if dependencies are not properly managed.</p>

<p>In the <code>test_point.c</code> file, update the intersection tests to make sure they use the new version of the file (you don’t need to know exactly how these tests work, and you can keep these tests inside the <code>test_point.c</code>; in a future lab, we will see a cleaner way of updating the tests). Once you have fixed this, you should be able to run <code>make tests</code> followed by <code>tests/test-libgeometry</code>.</p></li>
</ul>

<h2 id="project-team-exercise-design-warm-up">Project Team Exercise: Design Warm-up</h2>

<p>You can find the specification of the team exercise <a href="/cmsc22000/projects/2019/design-1/">here</a></p>

<p>Please note that this exercise is not part of your Lab #2 grade. Instead, it will be part of your Project grade for the class (see the <a href="/cmsc22000/syllabus/">syllabus</a> for more details) You should nonetheless use the lab time to get to know your team, and to start discussing the team exercise.</p>

<h2 id="submitting-your-lab">Submitting your lab</h2>

<p>Before submitting, make sure you&rsquo;ve added, committed and pushed all your work in the <code>lab2</code> directory (remember you can run <code>git status</code> to check this). Make sure you&rsquo;ve set up the <code>chisubmit</code> tool as described in <a href="/cmsc22000/labs/submit/">How to submit your labs</a>, and then run the following:</p>

<pre><code>chisubmit student assignment register lab2
chisubmit student assignment submit lab2
</code></pre>

</div>


  
</article>
      <footer id="main-footer" class="container main_footer">
  

  <div class="container nav foot no-print">
  

  <a class="toplink" href="#">back to top</a>

</div>

  <div class="container credits">
  
<div class="container footline">
  

</div>


  

</div>

</footer>

    </main>
    


    
  </body>
</html>

